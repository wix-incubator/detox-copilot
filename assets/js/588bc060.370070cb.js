"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[385],{375:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"API/framework-driver","title":"Framework Driver","description":"In this section, we will explain how to implement custom drivers for different testing frameworks in Copilot by Detox. A Framework Driver is a crucial component that ensures Copilot remains agnostic to the underlying testing framework, allowing it to work seamlessly with different frameworks like Detox, Jest, Mocha, etc.","source":"@site/docs/API/framework-driver.md","sourceDirName":"API","slug":"/API/framework-driver","permalink":"/detox-copilot/docs/API/framework-driver","draft":false,"unlisted":false,"editUrl":"https://github.com/wix-incubator/detox-copilot/blob/copilot-doc-site/website/docs/API/framework-driver.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"framework-driver","title":"Framework Driver","sidebar_label":"Framework Driver","sidebar_position":3},"sidebar":"apiSidebar","previous":{"title":"Prompt Handler","permalink":"/detox-copilot/docs/API/prompt-handler"}}');var i=n(4848),s=n(8453);const o={id:"framework-driver",title:"Framework Driver",sidebar_label:"Framework Driver",sidebar_position:3},a="Framework Driver",c={},l=[{value:"What is a Framework Driver?",id:"what-is-a-framework-driver",level:2},{value:"TestingFrameworkDriver Interface",id:"testingframeworkdriver-interface",level:3},{value:"Example: Detox Testing Framework Driver",id:"example-detox-testing-framework-driver",level:3},{value:"Optional Support for Snapshot",id:"optional-support-for-snapshot",level:3},{value:"Referencing Relevant Types",id:"referencing-relevant-types",level:3},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"framework-driver",children:"Framework Driver"})}),"\n",(0,i.jsxs)(r.p,{children:["In this section, we will explain how to implement custom drivers for different testing frameworks in ",(0,i.jsx)(r.strong,{children:"Copilot by Detox"}),". A ",(0,i.jsx)(r.strong,{children:"Framework Driver"})," is a crucial component that ensures ",(0,i.jsx)(r.strong,{children:"Copilot"})," remains agnostic to the underlying testing framework, allowing it to work seamlessly with different frameworks like Detox, Jest, Mocha, etc."]}),"\n",(0,i.jsx)(r.h2,{id:"what-is-a-framework-driver",children:"What is a Framework Driver?"}),"\n",(0,i.jsxs)(r.p,{children:["A ",(0,i.jsx)(r.strong,{children:"Framework Driver"})," provides an abstraction layer between ",(0,i.jsx)(r.strong,{children:"Copilot"})," and the underlying testing framework. It defines the necessary methods to interact with the testing framework's API and potentially supports features such as taking snapshots of the app's UI and capturing the view hierarchy."]}),"\n",(0,i.jsxs)(r.p,{children:["By implementing a custom driver, you enable ",(0,i.jsx)(r.strong,{children:"Copilot"})," to communicate with your chosen testing framework, making it flexible and adaptable to a variety of testing environments."]}),"\n",(0,i.jsx)(r.h3,{id:"testingframeworkdriver-interface",children:"TestingFrameworkDriver Interface"}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(r.code,{children:"TestingFrameworkDriver"})," interface defines the essential methods that a driver should implement:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"captureSnapshotImage"})}),": Takes a snapshot of the current screen and returns the path to the saved image. If the driver does not support snapshot functionality, it should return ",(0,i.jsx)(r.code,{children:"undefined"}),"."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"captureViewHierarchyString"})}),": Returns the current view hierarchy in a string representation, which helps the AI understand the structure of the app\u2019s UI."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"apiCatalog"})}),": Provides access to the available methods of the testing framework's API, such as matchers and actions."]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"Here\u2019s the interface definition for the driver:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"/**\n * Interface for the testing driver that will be used to interact with the underlying testing framework.\n */\nexport interface TestingFrameworkDriver {\n    /**\n     * Takes a snapshot of the current screen and returns the path to the saved image.\n     * If the driver does not support image, return undefined.\n     */\n    captureSnapshotImage: () => Promise<string | undefined>;\n\n    /**\n     * Returns the current view hierarchy in a string representation.\n     */\n    captureViewHierarchyString: () => Promise<string>;\n\n    /**\n     * The available guides methods of the testing framework.\n     */\n    apiCatalog: TestingFrameworkAPICatalog;\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"example-detox-testing-framework-driver",children:"Example: Detox Testing Framework Driver"}),"\n",(0,i.jsxs)(r.p,{children:["The following example demonstrates ",(0,i.jsx)(r.strong,{children:"part of the implementation"})," of a ",(0,i.jsx)(r.strong,{children:"Framework Driver"})," for the ",(0,i.jsx)(r.strong,{children:"Detox"})," testing framework. This snippet focuses on integrating core functionality like matchers, actions, and snapshot capabilities:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"const jestExpect = require('expect').default;\nconst detox = require('../..');\n\nconst detoxCopilotFrameworkDriver = {\n  apiCatalog: {\n    context: { ...detox, jestExpect },\n    categories: [\n      {\n        title: 'Matchers',\n        items: [\n          {\n            signature: 'by.id(id: string)',\n            description: 'Matches elements by their test ID.',\n            example: \"element(by.id('loginButton'))\",\n            guidelines: ['Use test IDs (accessibility identifiers) to uniquely identify elements. This is the best-practice matcher.'],\n          },\n          {\n            signature: 'by.text(text: string)',\n            description: 'Matches elements by their text (value).',\n            example: \"element(by.text('Login'))\",\n            guidelines: ['Prefer test IDs over text matchers when possible.'],\n          },\n          // Additional matchers can be added here...\n        ],\n      },\n      {\n        title: 'Actions',\n        items: [\n          {\n            signature: 'tap(point?: Point2D)',\n            description: 'Simulates tap on an element.',\n            example: \"await element(by.id('loginButton')).tap();\",\n          },\n          {\n            signature: 'longPress(point?: Point2D, duration?: number)',\n            description: 'Simulates long press on an element.',\n            example: \"await element(by.id('menuItem')).longPress();\",\n            guidelines: ['Tapping on edges of elements might work better when adding a small offset to the point.'],\n          },\n          // Additional actions can be added here...\n        ],\n      },\n    ],\n  },\n  // Example method implementations:\n  captureSnapshotImage: async () => {\n    try {\n      const screenshot = await detox.device.takeScreenshot();\n      return screenshot;\n    } catch (error) {\n      console.error('Error capturing snapshot:', error);\n      return undefined;\n    }\n  },\n\n  captureViewHierarchyString: async () => {\n    try {\n      const hierarchy = await detox.device.getUIHierarchy();\n      return hierarchy;\n    } catch (error) {\n      console.error('Error capturing view hierarchy:', error);\n      return '';\n    }\n  },\n};\n\nmodule.exports = detoxCopilotFrameworkDriver;\n"})}),"\n",(0,i.jsx)(r.h3,{id:"optional-support-for-snapshot",children:"Optional Support for Snapshot"}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(r.strong,{children:"Framework Driver"})," can optionally support snapshot functionality. If the underlying framework supports capturing screenshots or images of the app, this feature can be implemented in the ",(0,i.jsx)(r.code,{children:"captureSnapshotImage"})," method. If the driver does not support snapshots, it should return ",(0,i.jsx)(r.code,{children:"undefined"}),"."]}),"\n",(0,i.jsx)(r.h3,{id:"referencing-relevant-types",children:"Referencing Relevant Types"}),"\n",(0,i.jsxs)(r.p,{children:["The types related to the ",(0,i.jsx)(r.strong,{children:"Testing Framework Driver"})," can be found in the source code files under the following locations:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"TestingFrameworkDriver"})," interface is defined in the ",(0,i.jsx)(r.code,{children:"src/types"})," folder."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"TestingFrameworkAPICatalog"})," provides information about the available API methods and can also be found in the same folder."]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsxs)(r.p,{children:["By implementing a ",(0,i.jsx)(r.strong,{children:"Framework Driver"}),", ",(0,i.jsx)(r.strong,{children:"Copilot by Detox"})," can work with any testing framework, giving users flexibility in their testing setup. For more detailed instructions, you can refer to the relevant types and source code for guidance."]}),"\n",(0,i.jsxs)(r.p,{children:["If you are interested in contributing or have any suggestions for improving the ",(0,i.jsx)(r.strong,{children:"Framework Driver"})," system, check out the open tasks on our ",(0,i.jsx)(r.a,{href:"https://github.com/wix-incubator/detox-copilot/issues",children:"GitHub repository"}),"."]})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>a});var t=n(6540);const i={},s=t.createContext(i);function o(e){const r=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);